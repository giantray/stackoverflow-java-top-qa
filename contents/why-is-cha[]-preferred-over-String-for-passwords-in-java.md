## 为什么在java中存放密码更倾向于char[]相对于String

### 问题

在Swing中，password字段有一个getPassword()方法（返回char[]），而不是通常的getText()方法(返回字符串)。同样的，我遇到一个建议不要使用字符串处理密码。
为什么在谈论passwords时，认为字符串会对安全构成威胁？感觉使用char[]不是那么的方便。

### 回答
String是不可变的。这意味着，一旦你创建了一个String，如果另一个线程可以进行内存转存，在GC回收之前，没有办法可以摆脱数据（除了反射）。（这段翻译的不好，希望大家帮助改正）
然而对于数组，你可以在使用完就明确的擦除它，你可以用任何你喜欢的数据覆盖这个数组，而且password不会出现在系统的任何地方，甚至在垃圾回收之前。
所以，这是一个安全性的问题--但是，即使使用char[]也仅仅是降低了攻击者攻击的机会，而且仅仅对这种特定的攻击有效。
编辑：正如评论中指出的，垃圾收集器在移动数组数据时可能会在内存中留下杂散的数据副本。我认为这是特定于实现的--GC会清除所有的将要清除的数据，避免这种情况。即使是这样，还是会存在char[]保存有password字段的时间可以被攻击。

**stackoverflow链接**：
http://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords-in-java
